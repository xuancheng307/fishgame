@echo off
chcp 65001 >nul
title é­šå¸‚å ´éŠæˆ² - èª²å ‚ç‰ˆå•Ÿå‹•å™¨
color 0B

echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘           ðŸŸ é­šå¸‚å ´éŠæˆ² - èª²å ‚ç‰ˆ v3.0             â•‘
echo â•‘                 å•Ÿå‹•æŽ§åˆ¶å°                         â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

:: è¨­å®šç•¶å‰ç›®éŒ„
cd /d "%~dp0"

:: å–å¾—æœ¬æ©Ÿ IP ä½å€
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| findstr /c:"IPv4" ^| findstr /v "127.0.0.1"') do (
    for /f "tokens=1" %%b in ("%%a") do (
        set LOCAL_IP=%%b
    )
)
if "%LOCAL_IP%"=="" set LOCAL_IP=192.168.1.100

:: æª¢æŸ¥å¿…è¦æª”æ¡ˆ
echo [æª¢æŸ¥] é©—è­‰ç³»çµ±æª”æ¡ˆ...
if not exist "backend\server.js" (
    echo [éŒ¯èª¤] æ‰¾ä¸åˆ°å¾Œç«¯ä¼ºæœå™¨æª”æ¡ˆ backend\server.js
    echo        è«‹ç¢ºèªæ‚¨åœ¨æ­£ç¢ºçš„ç›®éŒ„ä¸­åŸ·è¡Œæ­¤æª”æ¡ˆ
    pause
    exit /b 1
)

if not exist "login.html" (
    echo [éŒ¯èª¤] æ‰¾ä¸åˆ°ç™»å…¥é é¢ login.html
    echo        è«‹ç¢ºèªæª”æ¡ˆæ˜¯å¦å®Œæ•´
    pause
    exit /b 1
)

if not exist "admin.html" (
    echo [éŒ¯èª¤] æ‰¾ä¸åˆ°ç®¡ç†å“¡ä»‹é¢ admin.html
    pause
    exit /b 1
)

if not exist "simple-team.html" (
    echo [éŒ¯èª¤] æ‰¾ä¸åˆ°å­¸ç”Ÿä»‹é¢ simple-team.html
    pause
    exit /b 1
)

echo [æª¢æŸ¥] ç³»çµ±æª”æ¡ˆå®Œæ•´ âœ“
echo.

:: æª¢æŸ¥ Node.js
echo [æª¢æŸ¥] æª¢æŸ¥ Node.js...
where node >nul 2>nul
if %errorlevel% neq 0 (
    echo [éŒ¯èª¤] æ‰¾ä¸åˆ° Node.js
    echo        è«‹åˆ° https://nodejs.org ä¸‹è¼‰ä¸¦å®‰è£ Node.js
    echo        å»ºè­°ç‰ˆæœ¬: v18.x æˆ–æ›´æ–°ç‰ˆæœ¬
    pause
    exit /b 1
)

echo [æª¢æŸ¥] Node.js å·²å®‰è£ âœ“
echo.

:: æª¢æŸ¥ä¸¦å®‰è£å¾Œç«¯å¥—ä»¶
echo [æª¢æŸ¥] æª¢æŸ¥å¾Œç«¯å¥—ä»¶...
cd backend
if not exist "node_modules" (
    echo [å®‰è£] é¦–æ¬¡åŸ·è¡Œï¼Œæ­£åœ¨å®‰è£å¾Œç«¯å¥—ä»¶...
    echo         è«‹ç¨ç­‰ï¼Œé€™å¯èƒ½éœ€è¦å¹¾åˆ†é˜...
    call npm install
    if %errorlevel% neq 0 (
        echo [éŒ¯èª¤] å¥—ä»¶å®‰è£å¤±æ•—
        pause
        exit /b 1
    )
    echo [å®‰è£] å¾Œç«¯å¥—ä»¶å®‰è£å®Œæˆ âœ“
) else (
    echo [æª¢æŸ¥] å¾Œç«¯å¥—ä»¶å·²å­˜åœ¨ âœ“
)

echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                   ðŸš€ å•Ÿå‹•ä¼ºæœå™¨                   â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

:: å•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨
echo [å•Ÿå‹•] æ­£åœ¨å•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨...
start "é­šå¸‚å ´éŠæˆ²å¾Œç«¯" /min cmd /c "node server.js"

:: ç­‰å¾…ä¼ºæœå™¨å•Ÿå‹•
echo [ç­‰å¾…] ä¼ºæœå™¨å•Ÿå‹•ä¸­ï¼Œè«‹ç¨ç­‰...
timeout /t 3 /nobreak >nul

:: æ¸¬è©¦ä¼ºæœå™¨æ˜¯å¦å•Ÿå‹•æˆåŠŸ
echo [æ¸¬è©¦] æª¢æŸ¥ä¼ºæœå™¨ç‹€æ…‹...
timeout /t 2 /nobreak >nul

cd /d "%~dp0"

echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                 ðŸŽ‰ å•Ÿå‹•å®Œæˆï¼                      â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo â”Œâ”€ ðŸ“‹ ç™»å…¥è³‡è¨Š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚                                                   â”‚
echo â”‚ ðŸ‘¨â€ðŸ« ç®¡ç†å“¡ï¼ˆè€å¸«ï¼‰:                                â”‚
echo â”‚   å¸³è™Ÿ: admin                                     â”‚
echo â”‚   å¯†ç¢¼: 123                                       â”‚
echo â”‚                                                   â”‚
echo â”‚ ðŸ‘¨â€ðŸŽ“ å­¸ç”Ÿ:                                         â”‚
echo â”‚   å¸³è™Ÿ: 01, 02, 03, ..., 10                      â”‚
echo â”‚   å¯†ç¢¼: èˆ‡å¸³è™Ÿç›¸åŒï¼ˆå¦‚ 01/01, 02/02ï¼‰             â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo â”Œâ”€ ðŸŒ å­˜å–ç¶²å€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚                                                   â”‚
echo â”‚ ðŸ” ç™»å…¥é é¢:                                      â”‚
echo â”‚   æœ¬æ©Ÿ: http://localhost:3000/login.html          â”‚
echo â”‚   ç¶²è·¯: http://%LOCAL_IP%:3000/login.html         â”‚
echo â”‚                                                   â”‚
echo â”‚ ðŸ‘¨â€ðŸ« ç®¡ç†å“¡ä»‹é¢:                                   â”‚
echo â”‚   æœ¬æ©Ÿ: http://localhost:3000/admin.html          â”‚
echo â”‚   ç¶²è·¯: http://%LOCAL_IP%:3000/admin.html         â”‚
echo â”‚                                                   â”‚
echo â”‚ ðŸ‘¨â€ðŸŽ“ å­¸ç”Ÿä»‹é¢:                                      â”‚
echo â”‚   æœ¬æ©Ÿ: http://localhost:3000/simple-team.html    â”‚
echo â”‚   ç¶²è·¯: http://%LOCAL_IP%:3000/simple-team.html   â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo âš ï¸  é‡è¦æé†’:
echo    â€¢ å­¸ç”Ÿè¨­å‚™å¿…é ˆé€£æŽ¥ç›¸åŒçš„ Wi-Fi ç¶²è·¯
echo    â€¢ ç¶²è·¯ IP ä½å€: %LOCAL_IP%
echo    â€¢ å¦‚ç„¡æ³•é€£ç·šè«‹æª¢æŸ¥é˜²ç«ç‰†è¨­å®š
echo    â€¢ è¦åœæ­¢æœå‹™è«‹åŸ·è¡Œã€Œåœæ­¢éŠæˆ².batã€
echo.

echo æŒ‰ä»»æ„éµé–‹å•Ÿç™»å…¥é é¢...
pause >nul

start http://localhost:3000/login.html

echo.
echo ðŸŽ® éŠæˆ²å·²å•Ÿå‹•ï¼Œç¥æ•™å­¸é †åˆ©ï¼
echo    æ­¤è¦–çª—å¯ä»¥é—œé–‰ï¼Œä¼ºæœå™¨æœƒç¹¼çºŒåŸ·è¡Œ
echo.
timeout /t 3 /nobreak >nul